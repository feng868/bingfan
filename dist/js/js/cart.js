define(["jquery"],function(){return{init:function(){function c(){for(var t=0,a=0,i=0,e=0;e<$(".cart-shop>ul").length;e++)t=$(".cart-shop>ul").eq(e).children().eq(6).children("input").val(),a=Number($(".cart-shop>ul").eq(e).children().eq(5).children("span").html().split("¥")[1]),$(".footing").eq(e).html("¥"+(t*a).toFixed(2)),Number(a),i+=t*a;$("#total").html("¥"+i.toFixed(2))}pro4=new Promise(function(a,t){$.ajax({type:"get",url:"../data/tejia.json",dataType:"json",success:function(t){t=t.tejia,a(t)},error:function(t){console.log(t)}})}),pro4.then(function(t){var a="";console.log(location.href.split("__")[1]),localStorage._select;for(var i=JSON.parse(localStorage.num),e=0;e<t.length;e++)for(var n in t[e])for(var l in i)t[e][n]==l&&(a+='<div class="cart-shop"  data-id="'+t[e].id+'"><p><input type="checkbox" checked/>商家：M.A.C魅可官网</p><ul><li><input type="checkbox" checked/></li><li><img src="'+t[e].img+'" /></li><li><span>'+t[e].miaoshu+"</span></li><li><p><span>"+location.href.split("_")[1]+"</span><span>"+t[e].size[location.href.split("__")[1]]+"</span></p></li><li><span>300克/件</span></li><li><span>"+t[e].price+'</span></li><li><span class="sub">-</span><input type="text" name="num" value="1" /><span class="add">+</span></li><li><span>无  </span></li><li><a href="##">移入收藏夹</a><a href="##" class="del" data-id="'+t[e].id+'">删除</a></li></ul><div class="cart-total"><i >合计(不含运费)<span class="footing">'+t[e].price+"</span></i></div></div>");$(".cart-shop-box").html(a);for(var r=1;r<$(".cart-shop").length;r++)$(".cart-shop").eq(r).css({"border-top":"4px solid #eee"});for(e=0;e<$(".cart-shop").length;e++)$("input[name='num']").eq(e).val(i[$(".del").eq(e).attr("data-id")]);$(".del").click(function(){$(this).attr("data-id"),$(this).parent().parent().parent().remove(),delete i[$(this).attr("data-id")],localStorage.num=JSON.stringify(i),c()}),$(".sub").click(function(){var t=$(this).next().val();t<=1?t=1:t--,$(this).next().val(t),i[$(this).parent().parent().parent().attr("data-id")]=t,localStorage.num=JSON.stringify(i),c()}),$(".add").click(function(){var t=$(this).prev().val();t++,$(this).prev().val(t),i[$(this).parent().parent().parent().attr("data-id")]=t,localStorage.num=JSON.stringify(i),c()}),$(".all").click(function(){$(".all")[0].checked?(console.log("1"),$("input[type='checkbox']").prop("checked",!0)):$("input[type='checkbox']").prop("checked",!1)}),$(".buy-btn>div").click(function(){confirm("是否购买此商品!")&&alert("没得卖！")}),c()})}}});